<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <!-- ============================  Pengertian DOM (Document Object Model) ====================
    DOM (Document Object Model) adalah representasi kode HTML ke dalam bentuk object agar
    bisa diproses oleh bahasa pemrograman, seperti JavaScript. setiap tag-tag HTML seperti <h1>, <p>, atau <form> dimodelkan
    atau dibentuk menjadi sebuah object. -->
    
    <!-- Tag <html> memiliki 2 anak (child) yakni <head> dan <body>. Dengan kata lain, tag <html>
    adalah induk (parent) dari tag <head> dan <body>. Tag <head> dan <body> merupakan saudara
    kandung (sibling). -->
    <h1>Belajar JavaScript</h1>        
    <p>Sedang Belajar <em>Javascript</em> <b>dari Duniailkom</b> </p>

    <!-- Berdasarkan diagram pohon diatas, berikut beberapa fakta yang bisa kita ambil:
        • Tag <head> memiliki 2 child: tag <meta> dan <title>.
        • Tag <body> memiliki 2 child: tag <h1> dan <title>.
        • Tag <h1> merupakan first child dari tag <body>.
        • Tag <p> merupakan last child dari tag <body>.
        • Tag <body> merupakan parent dari tag <h1> dan <p>.
        • Tag <p> merupakan sibling dari tag <h1>.
        • Tag <h1> merupakan sibling dari tag <p>.
        • Tag <b> merupakan last child dari tag <p>. -->
<script>
var foo = "Duniailkom";
console.log(foo); // Duniailkom

// Jika anda masih ingat tentang konsep object, ini merupakan cara peng-inputan nilai "JavaScript" ke dalam property
// foo dari object window
window.foo = "JavaScript";
console.log(foo); // JavaScript

window.bar = "Belajar";
console.log(bar); // Belajar

// Artinya, function salam() merupakan sesuatu yang sama dengan method salam() pada window object.
function salam(a){
return "Hello " + a;
}

var baz = window.salam("Jakarta");
console.log( baz ); // Hello Jakart

// ==================  Document Objec ===================================
// Terlihat bahwa DOM berisi document object . Tag <html> yang menjadi root dari DOM juga ada di dalam document object
console.log(window.document); // akan menampilkan seluruh property yang ada di dalam document object.

var foo = window.document;
console.log(foo.URL)  // file:///var/www/html/Prakter/PraktekJS/19.DOM/index.html
console.log(foo.lastModified) // 10.03 23/03/2022
console.log(foo.contentType) // text/html
console.log(foo.title) //Document

// Selain memiliki ratusan property, document object juga memiliki
// berbagai method. Kita akan membahas hal ini di pertengahan bab nanti.

// Jika yang diproses adalah element HTML seperti <body>, <h1> atau <p> dinamakan sebagai
// element node. Sedangkan teks yang ada di dalam element HTML dinamakan sebagai text node.
// Dalam diagram diatas, terdapat 9 element node dan 5 text node.

// Sebagaimana layaknya object JavaScript lain, node object juga memiliki berbagai property dan
// method. Property dan method inilah yang nantinya bisa kita akses untuk mengubah tampilan
// dari element tersebut

// Perintah document.getElementById() artinya kita memakai method getElementById() kepun-
// yaan document object. Apakah terdapat method lain untuk mencari element node? Yup,
// document object memiliki method getElementsByTagName(), querySelector() hingga query-
// SelectorAll().

// Sebelum masuk ke pembahasan tentang node object, kita telah mencoba mengakses property
// dari document object. Document object sendiri sebenarnya juga termasuk ke dalam node
// object, sehingga memiliki property yang berkaitan dengan Node.

// berisi informasi mengenai nama dari node object yang saat ini sedang diakse
console.og(document.nodeName); // #document
// berisi informasi mengenai tipe atau jenis dari node object yang saat ini
// sedang diakses. Angka 9 artinya document object termasuk ke dalam kelompok Document node.
console.og(document.nodeType); // 9
// Terdapat 12 jenis node di dalam DOM, yang bisa dilihat pada tabel berikut

// Nilai Jenis Node Penjelasan
// 1 Element node Element HTML
// 2 Attr node Atribut dari sebuah element HTML
// 3 Text node Teks yang biasanya berada di dalam element HTML
// 4 CDATASection node CDATA section dari dokumen XML
// 5 EntityReference node Sebuah referensi ke entity dari dokumen XML
// 6 Entity node Entity dari sebuah DTD
// 7 ProcessingInstruction node Sebuah instruksi pemrosesan
// 8 Comment Komentar HTML atau XML
// 9 Document node Root node dari seluruh element HTML
// 10 DocumentType node DTD dari sebuah dokumen XML
// 11 DocumentFragment node Ruang sementara (temporary storage) untuk menampung
// bagian dari dokumen
// 12 Notation node Notation dari DT

// Untuk dokumen HTML, kita hanya akan berurusan dengan 5 jenis node saja: Document,
// Element, Text, Attr dan Comment.

// • Document node merupakan root object dari seluruh tag HTML. Object ini berisi berbagai
// property dan method yang bisa digunakan untuk mencari dan mengubah node lain.
// • Element node merupakan node object untuk tag HTML, seperti <p>, <h1>, atau <form>.
// Element node bisa menjadi parent sekaligus child dari element node lain. Node inilah yang
// nantinya paling banyak kita pakai.
// • Text node adalah node object yang ada di dalam sebuah element HTML. Text node
// merupakan child dari element node, serta tidak bisa memiliki child node lain.
// • Attr node adalah node object yang berisi atribut dari sebuah element HTML. Dalam
// standar terbaru, penggunaannya sudah tidak disarankan lagi. Untuk mengubah atribut
// dari element HTML, kita bisa mengakses langsung dari element node.
// • Comment node adalah node object yang terbentuk dari komentar HTML, yakni tag <!--
// dan ->. Walaupun komentar tidak akan diproses oleh web browser, tapi bisa diakses dari
// DOM

// Berisi daftar anak (child) dari sebuah node object. 
console.og(document.childNodes); // NodeList [DocumentType. <html>]
// Berapa jumlahnya? Kita bisa akses dari property childNodes.length
console.og(document.childNodes.length); // 2  // Artinya, child dari document object ada 2, yakni: DocumentType dan <html>

// NodeList adalah istilah khusus untuk menyebut kumpulan dari berbagai node. NodeList ini mirip seperti array,
// tapi bukan array. Dalam JavaScript, ia termasuk kategori collection

var foo = document.childNodes[0]
var bar = document.childNodes[0]
// inilah cara kita menelusuri DOM TREE

// Sekarang, mau kita “apakan” variabel foo dan bar ini? Kedua variabel sebenarnya berisi
// node object, karena itu bagaimana kalau kita akses menggunakan property yang sama seperti
// document object

var foo = document.childNodes[0]
console.log(foo.nodeName) // html
console.log(foo.nodeType) // 10
console.log(foo.childNodes) // Nodelist [ ]
console.log(foo.childNodes.length) // 0

console.log("===========================");

var bar = document.childNodes[1];
console.log(bar.nodeName) // HTML
console.log(bar.nodeType) // 1
console.log(bar.childNodes) //  NodeList [<head>, "text " ", <body>"]
console.log(bar.childNodes.length) // 3'

// Sebagai tambahan, element node memiliki property firstChild dan lastChild yang bisa
// digunakan untuk mengakses anak pertama dan anak terakhir dari sebuah Nodelist. Karena
// document object hanya memiliki 2 child, efeknya akan sama seperti kode kita sebelumnya


var foo = document.firstChild;
console.log(foo.nodeName) // html
console.log(foo.nodeType) // 10
console.log(foo.childNodes) // Nodelist [ ]
console.log(foo.childNodes.length) // 0

console.log("===========================");

var bar = document.lastChild;
console.log(bar.nodeName) // HTML
console.log(bar.nodeType) // 1
console.log(bar.childNodes) //  NodeList [<head>, "text " ", <body>"]
console.log(bar.childNodes.length) // 3'

// Artinya untuk document object, document.firstChild sama dengan document.childNodes[0].
// Sedangkan document.lastChild sama dengan document.childNodes[1]

// =============================  Menelusuri DOM Tree =====================================
// Sebelum melanjutkan materinya, saya ingin review sedikit tentang apa yang sudah kita pela-
// jari. Bisakah anda menjelaskan maksud dari istilah: node object, element node, nodeType,
// childNodes, serta NodeList ?

// Semua istilah ini mirip satu sama lain, tapi sangat penting dipahami:

// • Node object adalah seluruh “object” yang ada di dalam struktur DOM, termasuk element
// HTML, teks HTML, atribut, dll. Terdapat 12 jenis node object di dalam DOM. Yang akan
// sering kita akses hanyalah element node dan text node.
// • Element node adalah salah satu jenis node yang isinya berupa tag atau element HTML,
// seperti <p>, <h1>, termasuk <html>.
// • nodeType adalah salah satu property dari node object, isinya angka yang menginfor-
// masikan jenis dari node object tersebut.
// • childNodes adalah salah satu property dari node object, isinya berupa kumpulan child
// nodes yang tergabung ke dalam NodeList.
// • NodeList adalah kumpulan berbagai node object. Nodelist berbentuk collection yang mirip
// seperti array.

// Jika anda masih kurang paham mengenai istilah-istilah ini, saya sarankan untuk mengulang
// kembali pembahasan sebelumnya

var foo = document.childNodes[1].childNodes[0];
        console.log(foo.nodeName);
        console.log(foo.nodeType);
        console.log(foo.childNodes); //Dari hasil yang didapat, element node <head> memiliki nama nodeName HEAD, dan mempunyai
// 5 child: NodeList [ #text " ", <meta>, #text " ", <title>, #text " " ].

//     HEAD memiliki 3 text node, yang semuanya berasal dari karakter carriage return.
// Jika saya menulis seluruh tag di dalam tag <head> dalam 1 baris panjang, text node ini tidak
// akan ditemui:
        console.log(foo.childNodes.length);

        console.log("=======================================")

        var bar = document.childNodes[1].childNodes[1];
        console.log(bar.nodeName); // text
        console.log(bar.nodeType); // 3
        console.log(bar.childNodes); // Nodelist [ ]
        console.log(bar.childNodes.length); // 0

        console.log("=======================================")
        
        var baz = document.childNodes[1].childNodes[2]
        console.log(baz.nodeName); // Body
        console.log(baz.nodeType); // 1
        console.log(baz.childNodes); //  NodeList [ #text " ", <h1>, #text " ", <p>, #text " ", <script> ]
        console.log(baz.childNodes.length); 6

        // Child ketiga dari element node HTML adalah element node BODY, yang beralamat di docu-
        // ment.childNodes[1].childNodes[2]. Berapakah jumlah child dari node ini? Ada 6: NodeList [
        // #text " ", <h1>, #text " ", <p>, #text " ", <script> ]. Dimana 3 diantaranya berupa
        // text node.
        // Yang cukup unik, last child dari BODY adalah <script>. Ini merupakan tag <script> untuk
        // menginput kode JavaScript. Kenapa bisa tampil disini? Karena tag <script> memang saya
        // tempatkan di bagian akhir tag <body>. Hal ini juga membuktikan bahwa DOM bisa mengakses
        // tag apapun, termasuk tag <script>.

        // var foo = document.childNodes[1].childNodes[2].childNodes[6].childNodes[14];
        // // Ini bisa dibaca dengan: “mulai dari document object, turun ke child node index 1, turun lagi ke
        // // child node dengan index 2, turun lagi ke child node dengan index 6, dan terakhir turun lagi
        // // ke child node dengan index 14”. Inilah materi yang paling penting dari DOM tree, yakni cara
        // // menelusuri struktur DOM untuk menemukan sebuah element node.

        console.log("===================================")
        // Latihan Menampilkan child ke 4 dri body
        var buz = document.childNodes[1].childNodes[2].childNodes[3]
        console.log(buz.nodeName);
        console.log(buz.nodeType);
        console.log(buz.childNodes);
        console.log(buz.childNodes.length);
        console.log("===================================")
        // Latihan Menampilkan chill em dari p
        var buz = document.childNodes[1].childNodes[2].childNodes[3]
        var bro = buz.lastChild;
        // Untuk variabel bar, saya mengambil variabel foo, kemudian mencari lastChild dari foo. Hasilnya
        // adalah element node B, yakni tag <b> yang menjadi last child dari tag <p
        console.log(bro.nodeName);
        console.log(bro.nodeType);
        console.log(bro.childNodes);
        console.log(bro.childNodes.length);

// ================================ Node Object Property ===========================
// Sebagaimana object lain di dalam JavaScript, node object juga memiliki berbagai property dan
// method. Saya akan membahas property terlebih dahulu.
// Dalam materi sebelum ini, sebenarnya kita telah memakai beberapa property node object, yakni
// nodeName, nodeType, dan childNodes. Berikut daftar property lain dari node object:
// • Node.baseURI (read only)
// • Node.childNodes (read only)
// • Node.firstChild (read only)
// • Node.lastChild (read only)
// • Node.nextSibling (read only)
// • Node.nodeName (read only)
// • Node.nodeType (read only)
// • Node.nodeValue
// • Node.ownerDocument (read only)
// • Node.parentNode (read only)
// • Node.parentElement (read only)
// • Node.previousSibling (read only)
// • Node.rootNode (read only)
// • Node.textContent
// Keterangan (read only) artinya nilai property tersebut tidak bisa diubah (hanya bisa diakses saja).

// Sebagian besar dari property ini berkaitan dengan node object lain. Sebagai contoh, property
// nextSibling dan previousSibling berguna untuk menampilkan node object yang menjadi
// saudara kandung (sibling) dari object saat ini. Property parentNode berguna untuk menampilkan
// node object yang menjadi orangtua (parent) dari object saat ini

var pNode = document.childNodes[1].childNodes[2].childNodes[3];
        
        console.log(pNode.baseURI); // file:///var/www/html/Praktek/PraktekJS/19.DOM/praktek.html

        console.log(pNode.childNodes); //NodeList(3) [ #text, em, b ]

        console.log(pNode.firstChild); // #text "Sedang Belajar "
        console.log(pNode.lastChild);  // <b>
        console.log(pNode.nodeName);   // P
        console.log(pNode.nodeType);   // 1
        console.log(pNode.nodeValue);  // null
        console.log(pNode.ownerDocument); // HTMLDocument file:///var/www/html/Praktek/PraktekJS/19.DOM/praktek.html
        
        console.log(pNode.parentNode) // <body>
        console.log(pNode.parentElement) // <body>
        console.log(pNode.previousSibling) // #text " " . => Karena sebelum tag <p>, terdapatsebuah karakter carriage return.
        console.log(pNode.textContent) // Sedang Belajar Javascript dari Duniailkom

        // Perhatikan bahwa element H1 berada sebelum element P. Dengan demikian, saya bisa menggu-
        // nakan perintah pNode.previousSibling. Sayangnya hasil dari pNode.previousSibling adalah
        // sebuah text node yang berisi karakter carriage return. Ini karena tag <p> dengan tag <h1> ditulis
        // terpisah di baris baru (tidak menyambung) sehingga terdapat karakter carriage return diantara
        // keduanya
        console.log("===============================================")
        var h1Node = pNode.previousSibling.previousSibling;

        console.log(h1Node.firstChild); // #text "Belajar Javascript"
        console.log(h1Node.lastChild);  // text "Belajar Javascript"
        console.log(h1Node.nodeName);   // h1
        console.log(h1Node.nextSibling) // text " "
        console.log(h1Node.previousSibling) // text " "
        console.log(h1Node.nodeType);   // 1
        console.log(h1Node.parentNode) // <body>
        console.log(h1Node.textContent) // Belajar Javascript
        // Yup, dengan menulis pNode.previousSibling.previousSibling kita sampai ke element H1.
        // Property previousSibling perlu dipanggil 2 kali karena ada sebuah text node diantara tag <h1>
        // dengan <p>.

        // Latihan Mencari element node Title beranngkat dari pNode
        console.log("==============================================")
        var pNode = document.childNodes[1].childNodes[2].childNodes[3];
        var bodyNode = pNode.parentNode;
        var headNode = bodyNode.previousSibling.previousSibling;
        var titleNode = headNode.lastChild.previousSibling;

        console.log(titleNode.nodeName);
        console.log(titleNode.textContent);
        console.log(titleNode.firstChild)
        console.log(titleNode.lastChild)
        console.log(titleNode.parentNode)
        console.log(titleNode.parentElement);
        console.log(titleNode.previousSibling.previousSibling);

// ======================================= Mengubah text dari node object ==============================
// Melihat daftar property yang ada di node object, terdapat property textContent. Property ini
// berisi teks dari sebuah node object. Menariknya, nilai textContent bisa diubah, yang artinya
// akan mengubah nilai teks dari element tersebut

console.log("==== Merubah text dari node object ====")

var chNode = document.childNodes[1].childNodes[0].childNodes[3];

console.log(chNode.textContent) // Title
chNode.textContent = "<em>Belajar JS </em>"; // Title pun berubah dari Belajar Javascript Menjadi Berubah

console.log("=== Latihan merubah element node <b> ===")
var bNode = document.childNodes[1].childNodes[2].childNodes[3].childNodes[2]

console.log(bNode.textContent);
bNode.textContent = " Ganti isi Tag B dengan Ini KWkwkwk"

// ========================== Node Object Method ===============================
// Node object memiliki berbagai method yang bisa digunakan terutama untuk memanipulasi
// DOM, seperti menambah node baru, menghapus node, mencopy node, dst.

// • Node.appendChild()
// • Node.cloneNode()
// • Node.contains()
// • Node.getFeature()
// • Node.hasChildNodes()
// • Node.insertBefore()
// • Node.removeChild()
// • Node.replaceChild(

        console.log("====== Node Object Method ======")
        var bodyNode = document.childNodes[1].childNodes[2];
        var h1Node = bodyNode.childNodes[1]
        var pNode = bodyNode.childNodes[3]
        var emNode = pNode.childNodes[1]
        var bNode = pNode.childNodes[2]

        console.log(bodyNode.nodeName) // Body
        console.log(h1Node.nodeName) // h1
        console.log(pNode.nodeName) // p
        console.log(emNode.nodeName) // em
        console.log(bNode.nodeName) // b

        console.log("== Method Document.createElement() dan Document.createTextNode() ==")
        var newPNode = document.createElement("p"); // Disini, variabel newPNode akan berisi sebuah node object bertipe element. Element tersebut
        // adalah P atau tag <p>. 
        var newTextNode = document.createTextNode("Ini Paragraf Baru"); // Variabel newTextNode akan berisi sebuah node object bertipe text,
        

        console.log(newPNode.nodeName)       // p
        console.log(newPNode.nodeType)       // 1
        console.log(newPNode.nodeValue)      // null
        
        console.log(newTextNode.nodeName)    // text
        console.log(newTextNode.nodeType)    // 3
        console.log(newTextNode.textContent) // Ini Paragraf Baru
        // Kedua node ini harus disatukan agar bisa berfungsi, dimana newTextNode harus menjadi child
        // dari newPNode. Ini kita lakukan menggunakan method dari node object: Node.appendChild().
        

        console.log("====  Method Node.appendChild() ===") 
        // Fungsinya, untuk menginput sebuah node ke posisi terakhir dari node saat ini
        var newPNode = document.createElement("p");
        var newTextNode = document.createTextNode("Ini Paragraf Baru")
        
        newPNode.appendChild(newTextNode);
        // Hasil dari perintah diatas, element node newPNode akan berisi teks "Sebuah paragraf baru".
        // Atau dengan kata lain, newPNode memiliki sebuah child node, yakni newTextNode.

        // Pekerjaan kita belum selesai, node object newPNode ini baru tersedia di dalam memory komputer,
        // kita harus menginputnya ke dalam struktur DOM. Bagaimana caranya? Juga bisa menggunakan
        // method appendChild(). Hanya saja kita akan menginput newPNode ke dalam element node BODY

        bodyNode.appendChild(newPNode)
        
        console.log("Latihan menambah element object ke node object p")
        var spanNode = document.createElement("span");
        var textSpanNode = document.createTextNode(" Javascript Uncover");

        spanNode.appendChild(textSpanNode);

        pNode.appendChild(spanNode)

        console.log("===  Method Node.insertBefore() ===")
        // method insertBefore() membutuhkan 2 argumen: node baru
        // yang ingin ditambahkan, dan node patokan. Node baru akan diinput pada posisi sebelum node
        // patokan.

        var bodyNode = document.childNodes[1].childNodes[2]
        var h1Node = bodyNode.childNodes[1];
        var pNode = bodyNode.childNodes[3]
        var emNode = pNode.childNodes[1];
        var bNode = pNode.childNodes[2]

        newh1Node = document.createElement("h1") // membuat element object baru
        newh1Text = document.createTextNode("Belajar Menambah Node baru"); // membuat text baru
        
        newh1Node.appendChild(newh1Text) // menggabungkan element obejct h1 dengan text node
        
        bodyNode.insertBefore(newh1Node,h1Node) // masukan element object sebelelum tag h1

        console.log('Latihan Insert before')

        DelNode = document.createElement('del')
        TextDel = document.createTextNode("php ")
        DelNode.appendChild(TextDel);

        pNode.insertBefore(DelNode,emNode)
        
        console.log("=== Method Node.replaceChild() ===")
    //     Method replaceChild() digunakan untuk mengganti sebuah node dengan node lain. Method
    // ini membutuhkan 2 argumen: node baru yang akan ditambahkan dan node yang akan dihapus.
    
        newDelNode = document.createElement('b')
        newDelText = document.createTextNode("php <del> dganti CSS ")
        newDelNode.appendChild(newDelText);
        
        pNode.replaceChild(newDelNode,DelNode) // ganti element object del dengan b 

        console.log("============  Method Node.removeChild() ==========")
        var deltedNode = pNode.removeChild(emNode) // menghapus em node ("javascritp")
        
        // DelNode.appendChild(deltedNode) // mengembalikan nilai yg dihapus

        console.log("=== Method Node.cloneNode() ====")
        // Method cloneNode() digunakan untuk men-copy sebuah node. Method ini membutuhkan 1
        // argumen berupa nilai boolean. Jika diinput true, seluruh child dari node tersebut akan ikut
        // dicopy. Jika diinput false, hanya node itu saya yang dicopy (child node tidak ikut)

        
        var bodyNode = document.childNodes[1].childNodes[2]
        var h1Node = bodyNode.childNodes[1];
        var pNode = bodyNode.childNodes[3]
        var emNode = pNode.childNodes[1];
        var bNode = pNode.childNodes[2]

        var newh1Node2 = h1Node.cloneNode(true)
        bodyNode.appendChild(newh1Node2)
        
        console.log("==========  Method Node.contains() =========")
        // Method contains() digunakan untuk memeriksa apakah sebuah node memiliki child node
        // tertentu. Node yang ingin diperiksa diinput sebagai argument dari method contains(). Jika
        // node tersebut ada, hasilnya true. Jika tidak ditemukan, hasilnya false.

        var cekNode1 = pNode.contains(emNode);
         console.log( cekNode1 ); // true

         var cekNode5 = pNode.contains(h1Node);
            console.log( cekNode5 )

        // ===================== Method Node.hasChildNodes() ========================
        // Method hasChildNodes() digunakan untuk memeriksa apakah sebuah node memiliki anak
        // (child) atau tidak. Hasilnya true jika terdapat child (walaupun 1 node), dan false jika tidak punya
        // child. Method ini tidak memerlukan argumen

        var cekNode1 = pNode.hasChildNodes();
        console.log( cekNode1 ); // true
        
        var cekNode2 = bodyNode.hasChildNodes();
        console.log( cekNode2 ); // true
        
        var cekNode3 = bNode.hasChildNodes();
        console.log( cekNode3 ); // true
        
        var cekNode4 = bNode.firstChild.hasChildNodes();
        console.log( cekNode4 ); // false
</script>
</body>
</html>